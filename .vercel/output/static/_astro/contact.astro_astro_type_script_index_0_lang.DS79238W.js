const D={};function L(e){const t=C(e),o=new ArrayBuffer(t.length),r=new DataView(o);for(let c=0;c<o.byteLength;c++)r.setUint8(c,t.charCodeAt(c));return o}const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function C(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",o=0,r=0;for(let c=0;c<e.length;c++)o<<=6,o|=U.indexOf(e[c]),r+=6,r===24&&(t+=String.fromCharCode((o&16711680)>>16),t+=String.fromCharCode((o&65280)>>8),t+=String.fromCharCode(o&255),o=r=0);return r===12?(o>>=4,t+=String.fromCharCode(o)):r===18&&(o>>=2,t+=String.fromCharCode((o&65280)>>8),t+=String.fromCharCode(o&255)),t}const P=-1,F=-2,v=-3,k=-4,B=-5,j=-6,M=-7;function Q(e,t){return G(JSON.parse(e),t)}function G(e,t){if(typeof e=="number")return s(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const o=e,r=Array(o.length);let c=null;function s(a,y=!1){if(a===P)return;if(a===v)return NaN;if(a===k)return 1/0;if(a===B)return-1/0;if(a===j)return-0;if(y||typeof a!="number")throw new Error("Invalid input");if(a in r)return r[a];const n=o[a];if(!n||typeof n!="object")r[a]=n;else if(Array.isArray(n))if(typeof n[0]=="string"){const l=n[0],f=t&&Object.hasOwn(t,l)?t[l]:void 0;if(f){let u=n[1];if(typeof u!="number"&&(u=o.push(n[1])-1),c??=new Set,c.has(u))throw new Error("Invalid circular reference");return c.add(u),r[a]=f(s(u)),c.delete(u),r[a]}switch(l){case"Date":r[a]=new Date(n[1]);break;case"Set":const u=new Set;r[a]=u;for(let i=1;i<n.length;i+=1)u.add(s(n[i]));break;case"Map":const T=new Map;r[a]=T;for(let i=1;i<n.length;i+=2)T.set(s(n[i]),s(n[i+1]));break;case"RegExp":r[a]=new RegExp(n[1],n[2]);break;case"Object":r[a]=Object(n[1]);break;case"BigInt":r[a]=BigInt(n[1]);break;case"null":const m=Object.create(null);r[a]=m;for(let i=1;i<n.length;i+=2)m[n[i]]=s(n[i+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{if(o[n[1]][0]!=="ArrayBuffer")throw new Error("Invalid data");const i=globalThis[l],R=s(n[1]),O=new i(R);r[a]=n[2]!==void 0?O.subarray(n[2],n[3]):O;break}case"ArrayBuffer":{const i=n[1];if(typeof i!="string")throw new Error("Invalid ArrayBuffer encoding");const R=L(i);r[a]=R;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const i=l.slice(9);r[a]=Temporal[i].from(n[1]);break}case"URL":{const i=new URL(n[1]);r[a]=i;break}case"URLSearchParams":{const i=new URLSearchParams(n[1]);r[a]=i;break}default:throw new Error(`Unknown type ${l}`)}}else if(n[0]===M){const l=n[1],f=new Array(l);r[a]=f;for(let u=2;u<n.length;u+=2){const T=n[u];f[T]=s(n[u+1])}}else{const l=new Array(n.length);r[a]=l;for(let f=0;f<n.length;f+=1){const u=n[f];u!==F&&(l[f]=s(u))}}else{const l={};r[a]=l;for(const f of Object.keys(n)){if(f==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const u=n[f];l[f]=s(u)}}return r[a]}return s(0)}function V(e){return e.endsWith("/")?e:e+"/"}const N={actionName:"_action"},Y=N,q=V,_={BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,CONTENT_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,MISDIRECTED_REQUEST:421,UNPROCESSABLE_CONTENT:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NETWORK_AUTHENTICATION_REQUIRED:511},$=Object.entries(_).reduce((e,[t,o])=>({...e,[o]:t}),{});class A extends Error{type="AstroActionError";code="INTERNAL_SERVER_ERROR";status=500;constructor(t){super(t.message),this.code=t.code,this.status=A.codeToStatus(t.code),t.stack&&(this.stack=t.stack)}static codeToStatus(t){return _[t]}static statusToCode(t){return $[t]??"INTERNAL_SERVER_ERROR"}static fromJson(t){return J(t)?new W(t.issues):H(t)?new A(t):new A({code:"INTERNAL_SERVER_ERROR"})}}function H(e){return typeof e=="object"&&e!=null&&"type"in e&&e.type==="AstroActionError"}function J(e){return typeof e=="object"&&e!=null&&"type"in e&&e.type==="AstroActionInputError"&&"issues"in e&&Array.isArray(e.issues)}class W extends A{type="AstroActionInputError";issues;fields;constructor(t){super({message:`Failed to validate: ${JSON.stringify(t,null,2)}`,code:"BAD_REQUEST"}),this.issues=t,this.fields={};for(const o of t)if(o.path.length>0){const r=o.path[0].toString();this.fields[r]??=[],this.fields[r]?.push(o.message)}}}function b(e){return`?${new URLSearchParams({[N.actionName]:e}).toString()}`}function d(e){if(e.type==="error"){let t;try{t=JSON.parse(e.body)}catch{return{data:void 0,error:new A({message:e.body,code:"INTERNAL_SERVER_ERROR"})}}return{error:A.fromJson(t),data:void 0}}return e.type==="empty"?{data:void 0,error:void 0}:{data:Q(e.body,{URL:t=>new URL(t)}),error:void 0}}const Z="%2E";function g(e={},t=""){return new Proxy(e,{get(o,r){if(o.hasOwnProperty(r)||typeof r=="symbol")return o[r];const c=t+encodeURIComponent(r.toString()).replaceAll(".",Z);function s(a){return h(a,c)}return Object.assign(s,{queryString:b(c),toString:()=>s.queryString,bind:s.bind,valueOf:()=>s.valueOf,$$FORM_ACTION:function(){return{method:"POST",name:"_astroAction",action:"?"+new URLSearchParams(s.toString()).toString()}},async orThrow(a){const{data:y,error:n}=await h(a,c);if(n)throw n;return y}}),g(s,c+".")}})}function z(e){let t=`${"/".replace(/\/$/,"")}/_actions/${new URLSearchParams(e()).get(Y.actionName)}`;return t=q(t),t}async function h(e,t,o){const r=new Headers;r.set("Accept","application/json");for(const[y,n]of Object.entries(D))r.set(y,n);let c=e;if(!(c instanceof FormData)){try{c=JSON.stringify(e)}catch(y){throw new A({code:"BAD_REQUEST",message:`Failed to serialize request body to JSON. Full error: ${y.message}`})}c?r.set("Content-Type","application/json"):r.set("Content-Length","0")}const s=await fetch(z(()=>b(t)),{method:"POST",body:c,headers:r});if(s.status===204)return d({type:"empty",status:204});const a=await s.text();return s.ok?d({type:"data",body:a,status:200,contentType:"application/json+devalue"}):d({type:"error",body:a,status:s.status,contentType:"application/json"})}const X=g(),p=document.querySelector("form"),S=document.querySelector("[type='submit']"),K=document.querySelectorAll("[data-control-input]"),E=document.querySelector("[role='alert']"),w={name:document.querySelector("#error-name"),email:document.querySelector("#error-email"),subject:document.querySelector("#error-subject"),message:document.querySelector("#error-message")};function x(){E&&(E.classList.remove("opacity-100","visible","p-4","mb-6","h-auto"),E.classList.add("opacity-0","invisible","p-0","mb-0","h-0"))}function I(e,t){const o=E?.querySelector("span");E&&(E.classList.add(t),E.classList.remove("opacity-0","invisible","p-0","mb-0","h-0"),E.classList.add("opacity-100","visible","p-4","mb-6","h-auto"),o&&(o.innerText=e),setTimeout(()=>{x()},1e4))}K.forEach(e=>{e.addEventListener("keydown",()=>{const t=e.getAttribute("name");if(!t)return;const o=w[t];o&&(o.innerText="")})});p?.addEventListener("submit",async e=>{e.preventDefault();const t=new FormData(p);S?.setAttribute("disabled","true");const o=await X.postContact(t).finally(()=>{S?.removeAttribute("disabled")}),r=Object?.keys(o?.error?.fields??{});o?.data?.success&&(p?.reset(),I(o.data.raw,"alert-success")),Object.keys(o?.error).length&&I(o?.error.message,"alert-error"),r.forEach(c=>{const s=w[c];s&&(s.classList.remove("hidden"),s.innerText="",s.append(o?.error?.fields[c]))})});
